<!DOCTYPE html><html><head><base href="/"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><meta name="apple-mobile-web-app-title" content=""><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="description" content="David Jones Blog"><meta name="keywords" content="blog,codding,font-end,web,developer,javascript"><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"><link rel="stylesheet" href="styles/bootstrap.css"><title>Welcome | David Jones</title></head><body><header class="header-container"><div class="container"><a class="brand" href="/" title="blog.davidkk.com">dBLog</a><nav class="nav"><a href="/tag/index.html" title="tags">Tags</a><a href="/archive/index.html" title="archive">Archives</a></nav></div></header><div class="index-container container context"><div class="entry-group"><section class="entry"><h3 class="entry-title"><a href="/article/前端开发 - 试题@Interesting.html" title="前端开发 - 试题@Interesting">前端开发 - 试题@Interesting</a></h3><div class="entry-infobar"><div class="category"><i class="fa fa-sticky-note-o"></i><a href="/category/前端/1.html" title="前端">前端</a></div><div class="tags"><i class="fa fa-tags"></i><a href="/tag/试题/1.html" title="试题">试题</a></div><time class="date"><i class="fa fa-calendar-o"></i><span>3/18/2015, 23:46:54</span></time></div><section class="entry-content"><div class="content clearfix"><h1 id="-javascript">试题## 使等式成立并执行打印<code>`</code>Javascript</h1>
<p>if (a == 1 &amp;&amp; a == 2 &amp;&amp; a == 3) {
  console.log(&#39;wtf?&#39;)
}
<code>`</code>### 考点- 运算符</p>
<ul>
<li>隐式转换中调用的方法<ul>
<li>toString</li>
<li>valueOf### 答案<code>Javascript
var a = { value: 0 }
a.valueOf = () =&gt; ++ a.valueif...</code></li></ul></li></ul>
</div></section><div class="entry-more"><a class="btn" href="/article/前端开发 - 试题@Interesting.html" title="Continue Reading">Continue Reading</a></div></section><section class="entry"><h3 class="entry-title"><a href="/article/前端开发 - 兼容性@浏览器.html" title="前端开发 - 兼容性@浏览器">前端开发 - 兼容性@浏览器</a></h3><div class="entry-infobar"><div class="category"><i class="fa fa-sticky-note-o"></i><a href="/category/前端/1.html" title="前端">前端</a></div><div class="tags"><i class="fa fa-tags"></i><a href="/tag/兼容性/1.html" title="兼容性">兼容性</a></div><time class="date"><i class="fa fa-calendar-o"></i><span>5/15/2015, 08:50:16</span></time></div><section class="entry-content"><div class="content clearfix"><h1 id="-css">浏览器兼容性## 移动端### 各种浏览器#### 禁止长按弹出菜单<code>`</code>CSS</h1>
<p>a, img {
  -webkit-touch-callout: none;
}
<code>`</code>#### 禁止用户选中文字</p>
<pre><code class="hljs CSS">html, body {
 -webkit-user-select: none;
 user-select: none;
}
```#### 改变输入框 placeholder 的颜色值```CSS
/*...</code></pre>
</div></section><div class="entry-more"><a class="btn" href="/article/前端开发 - 兼容性@浏览器.html" title="Continue Reading">Continue Reading</a></div></section><section class="entry"><h3 class="entry-title"><a href="/article/前端开发 - 基础知识@协议.html" title="前端开发 - 基础知识@协议">前端开发 - 基础知识@协议</a></h3><div class="entry-infobar"><div class="category"><i class="fa fa-sticky-note-o"></i><a href="/category/前端/1.html" title="前端">前端</a></div><div class="tags"><i class="fa fa-tags"></i><a href="/tag/基础知识/1.html" title="基础知识">基础知识</a></div><time class="date"><i class="fa fa-calendar-o"></i><span>5/15/2015, 08:50:16</span></time></div><section class="entry-content"><div class="content clearfix"><h1 id="-tcp-ip-http-socket-ip-tcp-http-tcp-ip-http-socket-tcp-ip-tcp-transmission-control-protocol-tcp-">协议## TCP/IP, HTTP, Socket网络由下往上分为 <code>物理层</code>, <code>数据链路层</code>, <code>网络层</code>, <code>传输层</code>, <code>会话层</code>, <code>表示层</code> 和 <code>应用层</code>. IP 协议对应于网络层; TCP 协议对应于传输层; HTTP 协议对应于应用层; TCP/IP 协议是传输层协议, 主要解决数据如何在网络中传输; 而 HTTP 协议对应于应用层, 主要解决如何包装数据, Socket 则是对 TCP/IP 协议的封装和应用###...</h1>
</div></section><div class="entry-more"><a class="btn" href="/article/前端开发 - 基础知识@协议.html" title="Continue Reading">Continue Reading</a></div></section><section class="entry"><h3 class="entry-title"><a href="/article/前端开发 - 基础知识@小程序.html" title="前端开发 - 基础知识@小程序">前端开发 - 基础知识@小程序</a></h3><div class="entry-infobar"><div class="category"><i class="fa fa-sticky-note-o"></i><a href="/category/前端/1.html" title="前端">前端</a></div><div class="tags"><i class="fa fa-tags"></i><a href="/tag/基础知识/1.html" title="基础知识">基础知识</a></div><time class="date"><i class="fa fa-calendar-o"></i><span>5/15/2015, 08:50:16</span></time></div><section class="entry-content"><div class="content clearfix"><h1 id="-andorid-x5-">小程序## 不同平台的内核- Andorid: 通过 X5 内核, 腾讯自己生产的内核</h1>
<ul>
<li>IOS: 通过 JavaScriptCore, 他把 Javascript 引擎通过 Object-C 进行了封装</li>
<li>开发工具: 通过 nw.js, 把 node 与 webkit 连接起来## MINA 框架微信的 MINA 框架把数据逻辑和页面这两部分合起来组成了响应的数据绑定系统## 结构将视图与逻辑分离,...</li></ul>
</div></section><div class="entry-more"><a class="btn" href="/article/前端开发 - 基础知识@小程序.html" title="Continue Reading">Continue Reading</a></div></section><section class="entry"><h3 class="entry-title"><a href="/article/前端开发 - 基础知识@浏览器.html" title="前端开发 - 基础知识@浏览器">前端开发 - 基础知识@浏览器</a></h3><div class="entry-infobar"><div class="category"><i class="fa fa-sticky-note-o"></i><a href="/category/前端/1.html" title="前端">前端</a></div><div class="tags"><i class="fa fa-tags"></i><a href="/tag/基础知识/1.html" title="基础知识">基础知识</a></div><time class="date"><i class="fa fa-calendar-o"></i><span>5/15/2015, 08:50:16</span></time></div><section class="entry-content"><div class="content clearfix"><h1 id="-layout-engine-render-engine-trident-ie">浏览器## 浏览器内核浏览器内核实质指的是 排版引擎 (Layout Engine) 和 渲染引擎 (Render Engine), 不同浏览器所用的内核一般不同- Trident: IE</h1>
<ul>
<li>Gecko: FF</li>
<li>Servo (FF 与 Samsung 开发中):</li>
<li>Presto: Opera (&lt; v12.17)</li>
<li>Webkit: Chrome, Safari, 360极速浏览器, 搜狗浏览器...</li></ul>
</div></section><div class="entry-more"><a class="btn" href="/article/前端开发 - 基础知识@浏览器.html" title="Continue Reading">Continue Reading</a></div></section><section class="entry"><h3 class="entry-title"><a href="/article/前端开发 - 基础知识@网络安全.html" title="前端开发 - 基础知识@网络安全">前端开发 - 基础知识@网络安全</a></h3><div class="entry-infobar"><div class="category"><i class="fa fa-sticky-note-o"></i><a href="/category/前端/1.html" title="前端">前端</a></div><div class="tags"><i class="fa fa-tags"></i><a href="/tag/基础知识/1.html" title="基础知识">基础知识</a></div><time class="date"><i class="fa fa-calendar-o"></i><span>5/15/2015, 08:50:16</span></time></div><section class="entry-content"><div class="content clearfix"><h1 id="-xss-cross-site-scripting-xss-url-">前端开发 - 基础知识@网络安全## XSS (Cross Site Scripting) - 跨站脚本攻击### 分类- 反射性 XSS: 把恶意脚本放到 URL 地址参数中</h1>
<ul>
<li>图片标记 <code>&lt;img src=&quot;javascript:alert(/xss/)&quot;&gt;&lt;/img&gt;</code>, <code>&lt;img dynsrc=&quot;javascript:alert(&#39;xss&#39;)&quot;&gt;</code></li>
<li>DOM 事件 <code>&lt;img src=&quot;&quot; onerror=alert(&quot;xss&quot;)&gt;...</code></li></ul>
</div></section><div class="entry-more"><a class="btn" href="/article/前端开发 - 基础知识@网络安全.html" title="Continue Reading">Continue Reading</a></div></section><section class="entry"><h3 class="entry-title"><a href="/article/前端开发 - 模块化@Javascript.html" title="前端开发 - 模块化@Javascript">前端开发 - 模块化@Javascript</a></h3><div class="entry-infobar"><div class="category"><i class="fa fa-sticky-note-o"></i><a href="/category/前端/1.html" title="前端">前端</a></div><div class="tags"><i class="fa fa-tags"></i><a href="/tag/基础知识/1.html" title="基础知识">基础知识</a></div><time class="date"><i class="fa fa-calendar-o"></i><span>6/8/2015, 16:47:22</span></time></div><section class="entry-content"><div class="content clearfix"><h1 id="javascript-javascript-class-module-ecmascript-">Javascript 模块化Javascript 不是一种模块化编程语言，它不支持类<code>(class)</code>，更没有模块<code>(module)</code>。(正在制定中的 ECMAScript 标准第六版，将正式支持类和模块，但还需要很长时间才能投入实用。)</h1>
<p>Javascript 只有本身的基础原生对象和类型，更多的对象和API都取决于宿主的提供，所以，我们可以看到JavaScript 缺少这些功能：- JavaScript...</p>
</div></section><div class="entry-more"><a class="btn" href="/article/前端开发 - 模块化@Javascript.html" title="Continue Reading">Continue Reading</a></div></section><section class="entry"><h3 class="entry-title"><a href="/article/前端开发 - 兼容性@AngularJS.html" title="前端开发 - 兼容性@AngularJS">前端开发 - 兼容性@AngularJS</a></h3><div class="entry-infobar"><div class="category"><i class="fa fa-sticky-note-o"></i><a href="/category/前端/1.html" title="前端">前端</a></div><div class="tags"><i class="fa fa-tags"></i><a href="/tag/兼容性/1.html" title="兼容性">兼容性</a></div><time class="date"><i class="fa fa-calendar-o"></i><span>9/14/2016, 13:16:53</span></time></div><section class="entry-content"><div class="content clearfix"><!-- # 前言- 问题机型   : 华为 Che2-TL00M EMUI 3.0 等部分华为, 三星机型
- 微信版本   : 微信 6.3.22 版本
- 框架版本   : angular.js@1.5.8
- 浏览器版本 : Chrome v37.0.0 (微信)## 问题表现- 使用该机华为输入法输入中文情况下会出现第二个输入字符覆盖第一个输入字符
- 问题输入法多数为输入的中文时, 每输入一个字符, 输入框就会显示一个英文, 而非全拼后才输入到输入框
- 该问题只有在微信浏览器才会出现## 原因排查angular.js@1.5.8 line: 23994 中, $sniffer.hasEvent 判断浏览器支持 input 事件, 但是在实际过程中, input 事件并没有更新 element.value, 导致输入框无法获取真正输入的值第一个值.```
  Line: 23994
  if ($sniffer.hasEvent('input')) {
    element.on('input', listener);
  }
```完成输入的一刻(after keyup), element.value 其实已经包含该值, 在 line: 23968 方法末尾中可以看出此时 `ctrl.$setViewValue(value, event)` 的 value 仍然是空字符串, 导致 $viewValue 的值仍然是空字符串. 即 `$viewValue === value === ''`;```
  Line: 23968
  var listener = function(ev) {
    if (timeout) {
      $browser.defer.cancel(timeout);
      timeout = null;
    }
    if (composing) return;
    var value = element.val(),
        event = ev && ev.type;    // By default we will trim the value
    // If the attribute ng-trim exists we will avoid trimming
    // If input type is 'password', the value is never trimmed
    if (type !== 'password' && (!attr.ngTrim || attr.ngTrim !== 'false')) {
      value = trim(value);
    }    // If a control is suffering from bad input (due to native validators), browsers discard its
    // value, so it may be necessary to revalidate (by calling $setViewValue again) even if the
    // control's value is the same empty value twice in a row.
    if (ctrl.$viewValue !== value || (value === '' && ctrl.$$hasNativeValidators)) {
      ctrl.$setViewValue(value, event);
    }
  };
```当输入第二个值时, 而此时 $viewValue 的已经更新到第一次输入 element.value. 这个过程之后它会拿第一个值的 $viewValue 与 element.value 对比, 一次很容易发现 (line: 24048) 两个值是不同的, 这样 angular 就会重新赋值 `$element.val($viewValue)` 导致第二次的值会覆盖第一次的值, 而之后的情况不会.因为 input event 不规范导致, 具体原因不明
但在系统默认浏览器下不会出现该问题因为如果删除 input 事件, keydown 还会导致值未更新情况,
造成第一个值仍然保存, 但是并不能结合第二个值合并输入成中文
因此还需要将 keydown 修改成 keyup 事件因为 angular 使用 jQLit 的原因 而且 angular@1.5.8
line: 1881 行中外置该对象, 因此我们可以重写该方法, 将
所有安卓在微信端的 input 事件, 都统一转成 keyup 事件 -->
</div></section><div class="entry-more"><a class="btn" href="/article/前端开发 - 兼容性@AngularJS.html" title="Continue Reading">Continue Reading</a></div></section><section class="entry"><h3 class="entry-title"><a href="/article/前端开发 - 基础知识@CSS.html" title="前端开发 - 基础知识@CSS">前端开发 - 基础知识@CSS</a></h3><div class="entry-infobar"><div class="category"><i class="fa fa-sticky-note-o"></i><a href="/category/前端/1.html" title="前端">前端</a></div><div class="tags"><i class="fa fa-tags"></i><a href="/tag/基础知识/1.html" title="基础知识">基础知识</a></div><time class="date"><i class="fa fa-calendar-o"></i><span>3/9/2018, 15:18:13</span></time></div><section class="entry-content"><div class="content clearfix"><h2 id="css-ie-w3c-">CSS### 盒模型盒模型有两种诠释, 一种是 IE 盒模型, 而另一种是 W3C 标准盒模型.<code>`</code></h2>
<p>┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃ margin ┃
┃ ┏━━━━━━━━━━━━━━━━━━━━━━━━━━┓ ┃
┃ ┃ border ┃ ┃
┃ ┃ ┏━━━━━━━━━━━━━━━━━━━━┓ ┃ ┃
┃ ┃ ┃ padding ┃ ┃ ┃
┃...</p>
</div></section><div class="entry-more"><a class="btn" href="/article/前端开发 - 基础知识@CSS.html" title="Continue Reading">Continue Reading</a></div></section><section class="entry"><h3 class="entry-title"><a href="/article/前端开发 - 基础知识@Cookie.html" title="前端开发 - 基础知识@Cookie">前端开发 - 基础知识@Cookie</a></h3><div class="entry-infobar"><div class="category"><i class="fa fa-sticky-note-o"></i><a href="/category/前端/1.html" title="前端">前端</a></div><div class="tags"><i class="fa fa-tags"></i><a href="/tag/基础知识/1.html" title="基础知识">基础知识</a></div><time class="date"><i class="fa fa-calendar-o"></i><span>3/9/2018, 15:18:13</span></time></div><section class="entry-content"><div class="content clearfix"><h1 id="cookiecookie-">CookieCookie 是用来保存用户信息, 并伴随生命周期存储在本地的一些数据.</h1>
<p>HTTP 的请求都会伴随着 Cookie 的发送, 但当服务器设置跨域头的时候, 若不设置 <code>add_header Access-Control-Allow-Credentials &#39;true&#39; always;</code> 和 <code>xhr.withCredentials = true</code> 的时候并会不自动发送## Cookie 属性-...</p>
</div></section><div class="entry-more"><a class="btn" href="/article/前端开发 - 基础知识@Cookie.html" title="Continue Reading">Continue Reading</a></div></section></div><nav class="pagination"><ul class="pagination-book"><li class="active"><a title="Currrent page">1</a></li><li><a href="/category/前端/page/2.html" title="2">2</a></li></ul><a class="pagination-addon" href="/category/前端/page/2.html" title="Show me more">Show me more</a></nav></div><footer class="footer-container"><div class="container"><div class="about"><a class="link" href="https://github.com/DavidKk" title="Github" target="_blank"><i class="fa fa-github-alt"></i></a><a class="link" href="http://codepen.io/DavidJones" title="CodePen" target="_blank"><i class="fa fa-codepen"></i></a><a class="link" href="https://twitter.com/Mr_DavidJones" title="Twitter" target="_blank"><i class="fa fa-twitter"></i></a><span><i class="fa fa-heart"></i></span><a class="link" href="https://plus.google.com/u/0/111899862347999076942" title="Google Plus" target="_blank"><i class="fa fa-google-plus"></i></a><a class="link" href="http://weibo.com/307853201" title="微博" target="_blank"><i class="fa fa-weibo"></i></a><a class="link" href="mailto:qowera@qq.com" title="E-Mail"><i class="fa fa-envelope-o"></i></a></div><p class="copyright clearfix">Powered by&nbsp;<a href="/">davidkk.com</a>&nbsp;&copy; 2016
,&nbsp;<a href="/static/sitemap.xml" title="Sitemap">Sitemap</a></p></div></footer><script src="scripts/index.js"></script></body></html>