<!DOCTYPE html><html><head><base href="/"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><meta name="apple-mobile-web-app-title" content=""><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="description" content="David Jones Blog"><meta name="keywords" content="blog,codding,font-end,web,developer,javascript"><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"><link rel="stylesheet" href="styles/bootstrap.css"><title>Welcome | David Jones</title></head><body><header class="header-container"><div class="container"><a class="brand" href="/" title="blog.davidkk.com">dBLog</a><nav class="nav"><a href="/tag/index.html" title="tags">Tags</a><a href="/archive/index.html" title="archive">Archives</a></nav></div></header><div class="article-container container context"><main class="content"><article class="article"><h1 class="article-title">OpenWrt - 扩容硬盘及移动设备</h1><div class="article-infobar"><div class="category"><i class="fa fa-sticky-note-o"></i><a href="/category/OpenWrt/1.html" title="OpenWrt">OpenWrt</a></div><time class="date"><i class="fa fa-calendar-o"></i><span>4/11/2015, 12:57:14</span></time><div class="author">Written by:&nbsp;<a title="&lt;David Jones qowera@qq.com&gt;" target="_blank">&lt;David Jones qowera@qq.com&gt;</a></div></div><section class="article-content"><p>此篇已经在 OpenWrt 安装到 virtualbox 中有说明。### 挂载如果有安装 WebUI，则可以通过 <code>系统 -&gt; 挂载点</code> 添加一个移动设备。否则可以通过以下方式挂载:<code>`</code></p>
<h1 id="-">安装支持软件</h1>
<p>$ opkg update
$ opkg install block-mount kmod-usb-storage kmod-fs-ext4  # 安装usb支持# 查看硬盘状态
$ blkid
/dev/sda1: TYPE=&quot;ext2&quot;
/dev/sda2: UUID=&quot;90f1212b-f256-4fff-9d2b-05af7de0859e&quot; TYPE=&quot;ext4&quot;
/dev/sdb: UUID=&quot;f2d177f1-ab1a-477f-a99c-366c7c1a822c&quot; TYPE=&quot;ext4&quot;# 若没有 blkid 命令
$ opkg update
$ opkg install blkid# 若 blkid 查找不到该硬盘，可能还没格式化
$ opkg install fdisk
$ fdisk -l# 格式化硬盘
$ opkg update
$ opkg install e2fsprogs    # 格式化工具$ mkfs.ext4 /dev/sdb        # ext4 格式</p>
<h1 id="mkfs-ext3-dev-sdb-ext3-">mkfs.ext3 /dev/sdb        # ext3 格式</h1>
<h1 id="mkfs-ext2-dev-sdb-ext2-">mkfs.ext2 /dev/sdb        # ext2 格式# 挂载硬盘</h1>
<p>$ mkdir -p /mnt/sdb
$ mount /dev/sdb /mnt/sdb# 查看挂载硬盘的信息
$ df -m
Filesystem  1M-blocks Used Available Use% Mounted on
rootfs             47   26        19  58% /
/dev/root          47   26        19  58% /
tmpfs             124    1       124   0% /tmp
tmpfs               1    0         1   0% /dev
/dev/sdb          497   23       449   5% /mnt/sdb# 此处 <code>/dev/sdb</code> 就是刚才挂载的硬盘
<code>### 配置 `fstab` 挂载配置</code>
$ vim /etc/config/fstabconfig mount
        option device &#39;/dev/sdb&#39;
        option target &#39;/mnt/sdb&#39;
        option fstype &#39;ext4&#39;
        option enabled &#39;1&#39;# 设置开机自动挂载
$ /etc/init.d/fstab enable
<code>`</code></p>
</section><div class="article-widgets"><div class="tags"><i class="fa fa-tags"></i><a href="/tag/OpenWrt/1.html" title="OpenWrt">OpenWrt</a><a href="/tag/路由器/1.html" title="路由器">路由器</a></div></div></article><nav class="pagination"><ul class="pagination-simple"><li><a href="/article/OpenWrt - 在扩展硬盘或USB设备中安装应用.html" title="OpenWrt - 在扩展硬盘或USB设备中安装应用"><span>Previous</span><span>OpenWrt - 在扩展硬盘或USB设备中安装应用</span></a></li><li><a href="/article/OpenWrt - 离线下载之 Aria2.html" title="OpenWrt - 离线下载之 Aria2"><span>Next</span><span>OpenWrt - 离线下载之 Aria2</span></a></li></ul></nav><div class="comments"><div class="disqus-plugin"><div id="disqus_thread"></div><script>!(function() {
  var d = document;
  s = d.createElement('script');
  s.src = '//davidkk.disqus.com/embed.js';
  s.setAttribute('data-timestamp', +new Date());
  !(d.head || d.body).appendChild(s);
})();</script></div></div></main></div><footer class="footer-container"><div class="container"><div class="about"><a class="link" href="https://github.com/DavidKk" title="Github" target="_blank"><i class="fa fa-github-alt"></i></a><a class="link" href="http://codepen.io/DavidJones" title="CodePen" target="_blank"><i class="fa fa-codepen"></i></a><a class="link" href="https://twitter.com/Mr_DavidJones" title="Twitter" target="_blank"><i class="fa fa-twitter"></i></a><span><i class="fa fa-heart"></i></span><a class="link" href="https://plus.google.com/u/0/111899862347999076942" title="Google Plus" target="_blank"><i class="fa fa-google-plus"></i></a><a class="link" href="http://weibo.com/307853201" title="微博" target="_blank"><i class="fa fa-weibo"></i></a><a class="link" href="mailto:qowera@qq.com" title="E-Mail"><i class="fa fa-envelope-o"></i></a></div><p class="copyright clearfix">Powered by&nbsp;<a href="/">davidkk.com</a>&nbsp;&copy; 2016
,&nbsp;<a href="/static/sitemap.xml" title="Sitemap">Sitemap</a></p></div></footer><script src="scripts/index.js"></script><script id="dsq-count-scr" src="//davidkk.disqus.com/count.js" async></script></body></html>