<!DOCTYPE html><html><head><base href="/"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><meta name="apple-mobile-web-app-title" content=""><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="description" content="David Jones Blog"><meta name="keywords" content="blog,codding,font-end,web,developer,javascript"><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"><link rel="stylesheet" href="styles/bootstrap.css"><title>Welcome | David Jones</title></head><body><header class="header-container"><div class="container"><a class="brand" href="/" title="blog.davidkk.com">dBLog</a><nav class="nav"><a href="/tag/index.html" title="tags">Tags</a><a href="/archive/index.html" title="archive">Archives</a></nav></div></header><div class="index-container container context"><div class="entry-group"><section class="entry"><h3 class="entry-title"><a href="/article/OpenWrt - DLNA 服务.html" title="OpenWrt - DLNA 服务">OpenWrt - DLNA 服务</a></h3><div class="entry-infobar"><div class="category"><i class="fa fa-sticky-note-o"></i><a href="/category/OpenWrt/1.html" title="OpenWrt">OpenWrt</a></div><div class="tags"><i class="fa fa-tags"></i><a href="/tag/OpenWrt/1.html" title="OpenWrt">OpenWrt</a><a href="/tag/路由器/1.html" title="路由器">路由器</a><a href="/tag/DLNA/1.html" title="DLNA">DLNA</a></div><time class="date"><i class="fa fa-calendar-o"></i><span>3/1/2016, 23:48:05</span></time></div><section class="entry-content"><div class="content clearfix"><p>超级简单，可以直接利用 <code>minidlna</code> 就可以实现### 安装 minidlna<code>$ opkg update
$ opkg install minidlna
$ opkg install luci-app-minidlna            # 可选
$ opkg install luci-i18n-minidlna-zh-cn     # 可选</code>### 配置可以进入服务 -&gt; miniDLNA 选项进行配置<code>$ vi...</code></p>
</div></section><div class="entry-more"><a class="btn" href="/article/OpenWrt - DLNA 服务.html" title="Continue Reading">Continue Reading</a></div></section><section class="entry"><h3 class="entry-title"><a href="/article/[backup]WOW - 宏命令.html" title="[backup]WOW - 宏命令">[backup]WOW - 宏命令</a></h3><div class="entry-infobar"><div class="category"><i class="fa fa-sticky-note-o"></i><a href="/category/游戏/1.html" title="游戏">游戏</a></div><div class="tags"><i class="fa fa-tags"></i><a href="/tag/WOW/1.html" title="WOW">WOW</a><a href="/tag/魔兽世界/1.html" title="魔兽世界">魔兽世界</a><a href="/tag/游戏/1.html" title="游戏">游戏</a></div><time class="date"><i class="fa fa-calendar-o"></i><span>9/6/2016, 13:03:34</span></time></div><section class="entry-content"><div class="content clearfix"><h1 id="wow-">WOW 宏## 通用宏<code>`</code></h1>
<h1 id="-">钓鱼宏</h1>
<p>#showtooltip
/equipset [nocombat,noequipped:鱼竿]钓鱼
/施放 [equipped:鱼竿]钓鱼</p>
<pre><code class="hljs less"># 上马宏(通用) {<span class="hljs-selector-tag">X</span>}
<span class="hljs-selector-id">#showtooltip</span>
/施放 <span class="hljs-selector-attr">[indoors]</span>猎豹守护
/<span class="hljs-selector-tag">userandom</span> <span class="hljs-selector-attr">[flyable]</span>西风幼龙,暮光幼龙;<span class="hljs-selector-attr">[swimming]</span>水黾,海龟
/<span class="hljs-selector-tag">userandom</span> 化石迅猛龙,炽热战马
```##...</code></pre>
</div></section><div class="entry-more"><a class="btn" href="/article/[backup]WOW - 宏命令.html" title="Continue Reading">Continue Reading</a></div></section><section class="entry"><h3 class="entry-title"><a href="/article/前端开发 - 兼容性@AngularJS.html" title="前端开发 - 兼容性@AngularJS">前端开发 - 兼容性@AngularJS</a></h3><div class="entry-infobar"><div class="category"><i class="fa fa-sticky-note-o"></i><a href="/category/前端/1.html" title="前端">前端</a></div><div class="tags"><i class="fa fa-tags"></i><a href="/tag/兼容性/1.html" title="兼容性">兼容性</a></div><time class="date"><i class="fa fa-calendar-o"></i><span>9/14/2016, 13:16:53</span></time></div><section class="entry-content"><div class="content clearfix"><!-- # 前言- 问题机型   : 华为 Che2-TL00M EMUI 3.0 等部分华为, 三星机型
- 微信版本   : 微信 6.3.22 版本
- 框架版本   : angular.js@1.5.8
- 浏览器版本 : Chrome v37.0.0 (微信)## 问题表现- 使用该机华为输入法输入中文情况下会出现第二个输入字符覆盖第一个输入字符
- 问题输入法多数为输入的中文时, 每输入一个字符, 输入框就会显示一个英文, 而非全拼后才输入到输入框
- 该问题只有在微信浏览器才会出现## 原因排查angular.js@1.5.8 line: 23994 中, $sniffer.hasEvent 判断浏览器支持 input 事件, 但是在实际过程中, input 事件并没有更新 element.value, 导致输入框无法获取真正输入的值第一个值.```
  Line: 23994
  if ($sniffer.hasEvent('input')) {
    element.on('input', listener);
  }
```完成输入的一刻(after keyup), element.value 其实已经包含该值, 在 line: 23968 方法末尾中可以看出此时 `ctrl.$setViewValue(value, event)` 的 value 仍然是空字符串, 导致 $viewValue 的值仍然是空字符串. 即 `$viewValue === value === ''`;```
  Line: 23968
  var listener = function(ev) {
    if (timeout) {
      $browser.defer.cancel(timeout);
      timeout = null;
    }
    if (composing) return;
    var value = element.val(),
        event = ev && ev.type;    // By default we will trim the value
    // If the attribute ng-trim exists we will avoid trimming
    // If input type is 'password', the value is never trimmed
    if (type !== 'password' && (!attr.ngTrim || attr.ngTrim !== 'false')) {
      value = trim(value);
    }    // If a control is suffering from bad input (due to native validators), browsers discard its
    // value, so it may be necessary to revalidate (by calling $setViewValue again) even if the
    // control's value is the same empty value twice in a row.
    if (ctrl.$viewValue !== value || (value === '' && ctrl.$$hasNativeValidators)) {
      ctrl.$setViewValue(value, event);
    }
  };
```当输入第二个值时, 而此时 $viewValue 的已经更新到第一次输入 element.value. 这个过程之后它会拿第一个值的 $viewValue 与 element.value 对比, 一次很容易发现 (line: 24048) 两个值是不同的, 这样 angular 就会重新赋值 `$element.val($viewValue)` 导致第二次的值会覆盖第一次的值, 而之后的情况不会.因为 input event 不规范导致, 具体原因不明
但在系统默认浏览器下不会出现该问题因为如果删除 input 事件, keydown 还会导致值未更新情况,
造成第一个值仍然保存, 但是并不能结合第二个值合并输入成中文
因此还需要将 keydown 修改成 keyup 事件因为 angular 使用 jQLit 的原因 而且 angular@1.5.8
line: 1881 行中外置该对象, 因此我们可以重写该方法, 将
所有安卓在微信端的 input 事件, 都统一转成 keyup 事件 -->
</div></section><div class="entry-more"><a class="btn" href="/article/前端开发 - 兼容性@AngularJS.html" title="Continue Reading">Continue Reading</a></div></section><section class="entry"><h3 class="entry-title"><a href="/article/前端开发 - 基础知识@CSS.html" title="前端开发 - 基础知识@CSS">前端开发 - 基础知识@CSS</a></h3><div class="entry-infobar"><div class="category"><i class="fa fa-sticky-note-o"></i><a href="/category/前端/1.html" title="前端">前端</a></div><div class="tags"><i class="fa fa-tags"></i><a href="/tag/基础知识/1.html" title="基础知识">基础知识</a></div><time class="date"><i class="fa fa-calendar-o"></i><span>3/9/2018, 15:18:13</span></time></div><section class="entry-content"><div class="content clearfix"><h2 id="css-ie-w3c-">CSS### 盒模型盒模型有两种诠释, 一种是 IE 盒模型, 而另一种是 W3C 标准盒模型.<code>`</code></h2>
<p>┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃ margin ┃
┃ ┏━━━━━━━━━━━━━━━━━━━━━━━━━━┓ ┃
┃ ┃ border ┃ ┃
┃ ┃ ┏━━━━━━━━━━━━━━━━━━━━┓ ┃ ┃
┃ ┃ ┃ padding ┃ ┃ ┃
┃...</p>
</div></section><div class="entry-more"><a class="btn" href="/article/前端开发 - 基础知识@CSS.html" title="Continue Reading">Continue Reading</a></div></section><section class="entry"><h3 class="entry-title"><a href="/article/前端开发 - 基础知识@Cookie.html" title="前端开发 - 基础知识@Cookie">前端开发 - 基础知识@Cookie</a></h3><div class="entry-infobar"><div class="category"><i class="fa fa-sticky-note-o"></i><a href="/category/前端/1.html" title="前端">前端</a></div><div class="tags"><i class="fa fa-tags"></i><a href="/tag/基础知识/1.html" title="基础知识">基础知识</a></div><time class="date"><i class="fa fa-calendar-o"></i><span>3/9/2018, 15:18:13</span></time></div><section class="entry-content"><div class="content clearfix"><h1 id="cookiecookie-">CookieCookie 是用来保存用户信息, 并伴随生命周期存储在本地的一些数据.</h1>
<p>HTTP 的请求都会伴随着 Cookie 的发送, 但当服务器设置跨域头的时候, 若不设置 <code>add_header Access-Control-Allow-Credentials &#39;true&#39; always;</code> 和 <code>xhr.withCredentials = true</code> 的时候并会不自动发送## Cookie 属性-...</p>
</div></section><div class="entry-more"><a class="btn" href="/article/前端开发 - 基础知识@Cookie.html" title="Continue Reading">Continue Reading</a></div></section><section class="entry"><h3 class="entry-title"><a href="/article/前端开发 - 基础知识@HTML.html" title="前端开发 - 基础知识@HTML">前端开发 - 基础知识@HTML</a></h3><div class="entry-infobar"><div class="category"><i class="fa fa-sticky-note-o"></i><a href="/category/前端/1.html" title="前端">前端</a></div><div class="tags"><i class="fa fa-tags"></i><a href="/tag/基础知识/1.html" title="基础知识">基础知识</a></div><time class="date"><i class="fa fa-calendar-o"></i><span>3/9/2018, 15:18:13</span></time></div><section class="entry-content"><div class="content clearfix"><h2 id="html-sgml-html-xml-xhtml-sgml-standard-generalized-markup-language-html-sgml-">HTML### 标记语言 SGML, HTML, XML, XHTML- SGML (Standard Generalized Markup Language, 标准通用标记语言) 是现时常用的超文本格式的最高层次标准, 是可以定义标记语言的元语言, 甚至可以定义不必采用&lt; &gt;的常规方式. HTML 是被用 SGML 描述的标记语言</h2>
<ul>
<li>HTML (HyperText Markup Language,...</li></ul>
</div></section><div class="entry-more"><a class="btn" href="/article/前端开发 - 基础知识@HTML.html" title="Continue Reading">Continue Reading</a></div></section><section class="entry"><h3 class="entry-title"><a href="/article/前端开发 - 基础知识@Javascript.html" title="前端开发 - 基础知识@Javascript">前端开发 - 基础知识@Javascript</a></h3><div class="entry-infobar"><div class="category"><i class="fa fa-sticky-note-o"></i><a href="/category/前端/1.html" title="前端">前端</a></div><div class="tags"><i class="fa fa-tags"></i><a href="/tag/基础知识/1.html" title="基础知识">基础知识</a></div><time class="date"><i class="fa fa-calendar-o"></i><span>3/9/2018, 15:18:13</span></time></div><section class="entry-content"><div class="content clearfix"><h1 id="javascript-ecmascript-ecma-262-ecmascript-ecmascript-javascript-ecmascript-dom-bom-">Javascript## ECMAScript由 ECMA-262 制定的标准, 用于实现通用的脚本语言, ECMAScript 提供了脚本语言需要遵守的规则, 细节和规范. 通用脚本编程语言, 它遵循了 ECMAScript 标准. JavaScript 包含核心 (ECMAScript), 文档对象模型 (DOM), 浏览器对象模型 (BOM)## 作用域作用域就是一个区域, 包含了其中变量,...</h1>
</div></section><div class="entry-more"><a class="btn" href="/article/前端开发 - 基础知识@Javascript.html" title="Continue Reading">Continue Reading</a></div></section><section class="entry"><h3 class="entry-title"><a href="/article/前端开发 - 基础知识@NodeJS.html" title="前端开发 - 基础知识@NodeJS">前端开发 - 基础知识@NodeJS</a></h3><div class="entry-infobar"><div class="category"><i class="fa fa-sticky-note-o"></i><a href="/category/前端/1.html" title="前端">前端</a></div><div class="tags"><i class="fa fa-tags"></i><a href="/tag/基础知识/1.html" title="基础知识">基础知识</a></div><time class="date"><i class="fa fa-calendar-o"></i><span>3/9/2018, 15:18:13</span></time></div><section class="entry-content"><div class="content clearfix"><h1 id="nodejs-setimmediate-process-nexttick-process-nexttick-io-nexttick-io-callback-">NodeJS### setImmediate 与 process.nextTick- process.nextTick 是将异步回调放到当前帧的末尾, io 回调之前, 如果 nextTick 过多, 会导致 io 回调不断延后, 最后 callback 堆积太多</h1>
<ul>
<li>setImmediate 是将异步回调放到下一帧, 不影响 io 回调, 不会造成 callback 堆积</li>
</ul>

</div></section><div class="entry-more"><a class="btn" href="/article/前端开发 - 基础知识@NodeJS.html" title="Continue Reading">Continue Reading</a></div></section><section class="entry"><h3 class="entry-title"><a href="/article/前端开发 - 基础知识@React.html" title="前端开发 - 基础知识@React">前端开发 - 基础知识@React</a></h3><div class="entry-infobar"><div class="category"><i class="fa fa-sticky-note-o"></i><a href="/category/前端/1.html" title="前端">前端</a></div><div class="tags"><i class="fa fa-tags"></i><a href="/tag/基础知识/1.html" title="基础知识">基础知识</a></div><time class="date"><i class="fa fa-calendar-o"></i><span>3/9/2018, 15:18:13</span></time></div><section class="entry-content"><div class="content clearfix"><h1 id="react-reactcomponent-">React- ReactComponent: 组件</h1>
<ul>
<li>ReactEmptyComponent (空组件): return null/false</li>
<li>ReactCompositeComponent (复合组件): 类组件/方法组件</li>
<li>ReactDOMComponent (DOM 组件): div 等</li>
<li>ReactTextComponent (文本组件): 文本组件, 字符串/数字</li>
<li>通过 render...</li></ul>
</div></section><div class="entry-more"><a class="btn" href="/article/前端开发 - 基础知识@React.html" title="Continue Reading">Continue Reading</a></div></section><section class="entry"><h3 class="entry-title"><a href="/article/前端开发 - 基础知识@Vue.html" title="前端开发 - 基础知识@Vue">前端开发 - 基础知识@Vue</a></h3><div class="entry-infobar"><div class="category"><i class="fa fa-sticky-note-o"></i><a href="/category/前端/1.html" title="前端">前端</a></div><div class="tags"><i class="fa fa-tags"></i><a href="/tag/基础知识/1.html" title="基础知识">基础知识</a></div><time class="date"><i class="fa fa-calendar-o"></i><span>3/9/2018, 15:18:13</span></time></div><section class="entry-content"><div class="content clearfix"><h1 id="vue-">Vue- 生命周期</h1>
<ul>
<li>Hook 包括: <code>beforeCreate</code>, <code>created</code>, <code>beforeMount</code>, <code>mounted</code>, <code>beforeUpdate</code>, <code>updated</code>, <code>beforeDestroy</code>, <code>destroyed</code><ul>
<li>Virtual DOM</li>
</ul>
</li>
<li>ElementVNode: 普通元素节点</li>
<li>TextVNode: 文本节点</li>
<li>ComponentVNode: 组件节点</li>
<li>EmptyVNode:...</li></ul>
</div></section><div class="entry-more"><a class="btn" href="/article/前端开发 - 基础知识@Vue.html" title="Continue Reading">Continue Reading</a></div></section></div><nav class="pagination"><ul class="pagination-book"><li><a href="/article/page/1.html" title="1">1</a></li><li><a href="/article/page/2.html" title="2">2</a></li><li class="active"><a title="Currrent page">3</a></li><li><a href="/article/page/4.html" title="4">4</a></li></ul><a class="pagination-addon" href="/article/page/4.html" title="Show me more">Show me more</a></nav></div><footer class="footer-container"><div class="container"><div class="about"><a class="link" href="https://github.com/DavidKk" title="Github" target="_blank"><i class="fa fa-github-alt"></i></a><a class="link" href="http://codepen.io/DavidJones" title="CodePen" target="_blank"><i class="fa fa-codepen"></i></a><a class="link" href="https://twitter.com/Mr_DavidJones" title="Twitter" target="_blank"><i class="fa fa-twitter"></i></a><span><i class="fa fa-heart"></i></span><a class="link" href="https://plus.google.com/u/0/111899862347999076942" title="Google Plus" target="_blank"><i class="fa fa-google-plus"></i></a><a class="link" href="http://weibo.com/307853201" title="微博" target="_blank"><i class="fa fa-weibo"></i></a><a class="link" href="mailto:qowera@qq.com" title="E-Mail"><i class="fa fa-envelope-o"></i></a></div><p class="copyright clearfix">Powered by&nbsp;<a href="/">davidkk.com</a>&nbsp;&copy; 2016
,&nbsp;<a href="/static/sitemap.xml" title="Sitemap">Sitemap</a></p></div></footer><script src="scripts/index.js"></script></body></html>