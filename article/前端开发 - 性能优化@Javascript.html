<!DOCTYPE html><html><head><base href="/"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><meta name="apple-mobile-web-app-title" content=""><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="description" content="David Jones Blog"><meta name="keywords" content="blog,codding,font-end,web,developer,javascript"><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"><link rel="stylesheet" href="styles/bootstrap.css"><title>Welcome | David Jones</title></head><body><header class="header-container"><div class="container"><a class="brand" href="/" title="blog.davidkk.com">dBLog</a><nav class="nav"><a href="/tag/index.html" title="tags">Tags</a><a href="/archive/index.html" title="archive">Archives</a></nav></div></header><div class="article-container container context"><main class="content"><article class="article"><h1 class="article-title">前端开发 - 性能优化@Javascript</h1><div class="article-infobar"><div class="category"><i class="fa fa-sticky-note-o"></i><a href="/category/前端/1.html" title="前端">前端</a></div><time class="date"><i class="fa fa-calendar-o"></i><span>3/9/2018, 15:18:13</span></time><div class="author">Written by:&nbsp;<a title="&lt;David Jones qowera@qq.com&gt;" target="_blank">&lt;David Jones qowera@qq.com&gt;</a></div></div><section class="article-content"><h1 id="javascript-">Javascript 性能优化- 使用变量缓存</h1>
<ul>
<li>缓存正则对象, 正则对象创建非常缓慢</li>
<li><code>Object.keys()</code><ul>
<li>可以得到自身可枚举的属性, 但得不到原型链上的属性</li>
</ul>
</li>
<li><code>Object.getOwnPropertyNames()</code><ul>
<li>可以得到自身所有的属性 (包括不可枚举 enumerable), 但得不到原型链上的属性, Symbols 属性也得不到</li>
<li>减少<code>递归</code>与<code>递推</code>的使用</li>
<li>使用全等 <code>===</code>, 或者 <code>switch</code></li>
<li>删除不必要的属性引用, 使用 <code>i = undefined</code> 或者 <code>i = null</code></li>
</ul>
</li>
<li>垃圾回收机制是当引用为 0 时执行回收</li>
<li><code>delete o.a</code> 会直接改变对象的结构<ul>
<li>不使用 <code>eval</code></li>
<li>使用字面量代替构造函数</li>
</ul>
</li>
<li>字面量是引擎直接解释执行的, 而如果使用构造函数的话, 需要调用一个内部构造器</li>
<li><code>var a = new Object()</code> -&gt; <code>var a = {}</code></li>
<li><code>var a = new Array()</code> -&gt; <code>var a = []</code><ul>
<li><code>empty</code> 的值会通过字典的方式保存起来, 导致访问也变慢</li>
</ul>
</li>
<li>往数组中插入混合类型很容易降低数组使用的效率, 尽量保持数组中元素的类型一致### 遍历优化遍历速度 (for cache &gt; for) &gt; (for of &gt; forEach) &gt; for in### 不使用 for in 遍历- 遍历所有属性, 不仅是 ownProperty 也包括<code>原型链上</code>的所有属性<ul>
<li>忽略可枚举属性 (enumerable 为 false 的属性)</li>
<li>必须按特定顺序遍历, 先遍历所有数字键, 然后按照创建属性的顺序遍历剩下的</li>
</ul>
</li>
<li>数字键按小到大遍历<code>`</code>Javascript
function A () {}
A.prototype.attrA = undefinedlet objectA = new A()
objectA.attrB = undefined
Object.defineProperty(objectA, &#39;attrC&#39;, {
value: undefined,
enumerable: false
})for (let i in objectA) {
console.log(i)
}// &#39;attrB&#39;, &#39;attrA&#39;
// it will ignore attrClet objectB = {
&#39;,&#39;: undefined,
&#39;.&#39;: undefined,
b: undefined,
c: undefined,
a: undefined,
2: undefined,
3: undefined,
1: undefined
}for (let i in objectB) {
console.log(i)
}// 1, 2, 3, &#39;,&#39;, &#39;.&#39;, &#39;b&#39;, &#39;c&#39;, &#39;a&#39;<pre><code class="hljs javascript"><span class="hljs-keyword">let</span> object = {
<span class="hljs-string">','</span>: <span class="hljs-literal">undefined</span>,
<span class="hljs-string">'.'</span>: <span class="hljs-literal">undefined</span>,
<span class="hljs-attr">b</span>: <span class="hljs-literal">undefined</span>,
<span class="hljs-attr">c</span>: <span class="hljs-literal">undefined</span>,
<span class="hljs-attr">a</span>: <span class="hljs-literal">undefined</span>,
<span class="hljs-number">2</span>: <span class="hljs-literal">undefined</span>,
<span class="hljs-number">3</span>: <span class="hljs-literal">undefined</span>,
<span class="hljs-number">1</span>: <span class="hljs-literal">undefined</span>
}<span class="hljs-keyword">let</span> keys = <span class="hljs-built_in">Object</span>.keys(object)
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = keys, i --;) {
<span class="hljs-comment">// to do something</span>
}
<span class="hljs-string">``</span><span class="hljs-string">`### 使用变量缓存`</span><span class="hljs-string">``</span>Javascript
<span class="hljs-keyword">let</span> array = []
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>, l = array.length; i &lt; l; i ++) {
<span class="hljs-comment">// doing something</span>
}
<span class="hljs-string">``</span><span class="hljs-string">`### 倒序 for, 将 i -- 放到退出判断条件里`</span><span class="hljs-string">``</span>Javascript
<span class="hljs-keyword">let</span> array = []
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = array.length;i --;) {
<span class="hljs-comment">// doing something</span>
}</code></pre></li>
</ul>
</section><div class="article-widgets"><div class="tags"><i class="fa fa-tags"></i><a href="/tag/性能优化/1.html" title="性能优化">性能优化</a></div></div></article><nav class="pagination"><ul class="pagination-simple"><li><a href="/article/前端开发 - 性能优化@CSS.html" title="前端开发 - 性能优化@CSS"><span>Previous</span><span>前端开发 - 性能优化@CSS</span></a></li><li><a href="/article/前端开发 - 性能优化@网页.html" title="前端开发 - 性能优化@网页"><span>Next</span><span>前端开发 - 性能优化@网页</span></a></li></ul></nav><div class="comments"><div class="disqus-plugin"><div id="disqus_thread"></div><script>!(function() {
  var d = document;
  s = d.createElement('script');
  s.src = '//davidkk.disqus.com/embed.js';
  s.setAttribute('data-timestamp', +new Date());
  !(d.head || d.body).appendChild(s);
})();</script></div></div></main></div><footer class="footer-container"><div class="container"><div class="about"><a class="link" href="https://github.com/DavidKk" title="Github" target="_blank"><i class="fa fa-github-alt"></i></a><a class="link" href="http://codepen.io/DavidJones" title="CodePen" target="_blank"><i class="fa fa-codepen"></i></a><a class="link" href="https://twitter.com/Mr_DavidJones" title="Twitter" target="_blank"><i class="fa fa-twitter"></i></a><span><i class="fa fa-heart"></i></span><a class="link" href="https://plus.google.com/u/0/111899862347999076942" title="Google Plus" target="_blank"><i class="fa fa-google-plus"></i></a><a class="link" href="http://weibo.com/307853201" title="微博" target="_blank"><i class="fa fa-weibo"></i></a><a class="link" href="mailto:qowera@qq.com" title="E-Mail"><i class="fa fa-envelope-o"></i></a></div><p class="copyright clearfix">Powered by&nbsp;<a href="/">davidkk.com</a>&nbsp;&copy; 2016
,&nbsp;<a href="/static/sitemap.xml" title="Sitemap">Sitemap</a></p></div></footer><script src="scripts/index.js"></script><script id="dsq-count-scr" src="//davidkk.disqus.com/count.js" async></script></body></html>