<!-- title: 前端开发 - 兼容性 -->
<!-- author: <David Jones qowera@qq.com> -->
<!-- date: 2015-05-15 08:50:16 -->
<!-- category: 前端 -->
<!-- tag: 基础知识 -->

# [backup] 前端开发 - 兼容性

## 低级浏览器

主要针对IE来对比说明

### 盒模型

盒模型有两种诠释，一种是IE盒模型，而另一种是W3C盒模型。

```
┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃             margin             ┃
┃  ┏━━━━━━━━━━━━━━━━━━━━━━━━━━┓  ┃
┃  ┃          border          ┃  ┃
┃  ┃  ┏━━━━━━━━━━━━━━━━━━━━┓  ┃  ┃
┃  ┃  ┃       padding      ┃  ┃  ┃
┃  ┃  ┃  ┏━━━━━━━━━━━━━━┓  ┃  ┃  ┃
┃  ┃  ┃  ┃              ┃  ┃  ┃  ┃
┃  ┃  ┃  ┃    content   ┃  ┃  ┃  ┃
┃  ┃  ┃  ┃              ┃  ┃  ┃  ┃
┃  ┃  ┃  ┗━━━━━━━━━━━━━━┛  ┃  ┃  ┃
┃  ┃  ┃                    ┃  ┃  ┃
┃  ┃  ┗━━━━━━━━━━━━━━━━━━━━┛  ┃  ┃
┃  ┃                          ┃  ┃
┃  ┗━━━━━━━━━━━━━━━━━━━━━━━━━━┛  ┃
┃                                ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
```

#### 怪异模式 (Quirks mode) 与 标准模式 (Standards Mode)

IE浏览器从服务端获取网页后会根据文档的DOCTYPE定义显示网页，如果文档正确定义了DOCTYPE浏览器则会进入标准模式（Standards Mode），否则浏览器会进入怪异模式或混杂模式（Quirks mode）
在标准模式下，浏览器会根据W3C的规范来渲染页面；而在怪异模式中，页面将以IE5的渲染方式来渲染页面。

IE盒模型：

- 主要有 IE5, IE6(Q), IE7(Q)
- width = content + padding left/right + border left/right
- box width = width + margin left/right

W3C盒模型：

- 主要由 IE6(S), IE7(S), W3C标准浏览器
- width = content 宽度
- box width = width + padding left/right + border left/right + margin left/right

因为IE盒模型更为合理，[事例](http://blog.csdn.net/ncode/article/details/7428746)，因此在 CSS3 中引入了 `box-sizing`，因此我们可以设置使用IE盒模型的渲染模式，IE8也支持。

```
* {
  box-sizing: border-box;
}
```

##### 设置标准模式

[最详细](http://www.fantxi.com/blog/archives/browser-mode/)

- 加DOCTYPE声明
- 设置X-UA-Compatible触发。

##### 设置怪异模式

- 无doctype声明、定义旧的HTML版本（HTML4以下,例如3.2）
- 加XML声明，可在ie6下触发
- 在XML声明和XHTML的DOCTYPE之间加入HTML注释，可在ie7下触发
- `<!-- keep IE7 in quirks mode -->` 放在 `<!DOCTYPE` 前面

#### 盒模型带来的兼容性问题









### 垂直居中

```
# 将行距增加到和整个DIV一样高 line-height:200px;然后插入文字，就垂直居中了；缺点是要控制内容不要换行。
vertical-align: middle;

# DIV 随之居中，但是高度必须确定，否则无法垂直居中。
height: 100px;
display: block;
position: absolute;
top: 0;
bottom: 0;
margin-top: auto;
margin-bottom: auto;
```

### Double margin

设置为float的div在ie下设置的margin会加倍。将 div 设置成 display: inline; 能解决该问题

```
display: inline;
flat: left;
margin-right: 10px;
```

这里细说一下block与inline两个元素：block元素的特点是,总是在新行上开始,高度,宽度,行高,边距都可以控制(块元素);Inline元素的特点是,和其他元素在同一行上,不可控制(内嵌元素);

若要实现同行排列

```
display: table;
```

### ie6 `min-` 问题

IE6 没有 `min-`，但是他本身 `width`，`height` 就支持这种特性。

```
#container {
  min-width: 600px;
  width: expression_r(document.body.clientWidth ＜ 600? "600px": "auto" );
}
# 第一个min-width是正常的；css制作但第2行的width使用了Javascript，这只有IE才认得，这也会让你的HTML文档不太正规。
# 它实际上通过Javascript的判断来实现最小宽度。
```

### div 浮动 ie 文本产生 3px 的 bug

左边对象浮动，右边采用外补丁的左边距来定位，右边对象内的文本会离左边有3px的间距。

```
#left {
  float: left;
}

*html #left {
  margin-right: -3px;
}
```

### 清除浮动

### IE6图片有空隙

```
img {
  display: block;
  # or
  vertical-align: top|bottom|middle|text-bottom;
}
```

